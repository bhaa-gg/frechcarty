<section [class.hidden]="loading" class="space-y-4 min-h-[80vh]">
    @for (order of allOrders; track order._id) {
    <div id="accordion-flush-@order._id"
        class="border-b border-gray-200 dark:border-gray-700 transition-colors duration-300" data-accordion="collapse">

        <!-- Accordion Header -->
        <h2>
            <button (click)="HandleAccordingClick(order._id)" type="button" class="flex items-center cursor-pointer justify-between w-full py-5 font-medium rtl:text-right
               text-gray-700 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400
               transition-colors duration-200 gap-3">
                <div class="flex w-full items-center justify-between">
                    <p>Order Price : {{order.totalOrderPrice | currency : 'Egp'}}</p>
                    <p>day : {{order.createdAt | date : 'dd/MM/yyyy'}}</p>
                </div>
                <i class="fa-solid fa-chevron-down transition-transform duration-300"
                    [class.rotate-180]="ordersId.includes(order._id)"></i>
            </button>
        </h2>

        <!-- Accordion Content -->
        <div class="overflow-hidden transition-all duration-500 ease-in-out"
            [class.max-h-0]="!ordersId.includes(order._id)" [class.max-h-[1000px]]="ordersId.includes(order._id)">
            <div class="p-5 bg-gray-50 dark:bg-gray-800 rounded-b-2xl">
                <div class="grid md:grid-cols-4 lg:grid-cols-6 sm:grid-cols-2 grid-cols-1 gap-3">
                    @for (p of order.cartItems; track p._id) {
                    <div class="p-3 space-y-3 rounded-2xl border border-gray-200 dark:border-gray-700
                   bg-white dark:bg-gray-900 shadow-sm hover:shadow-md transition-all duration-200">
                        <img [src]="p.product.imageCover" loading="lazy" alt=""
                            class="rounded-xl w-full object-cover max-h-40">
                        <p class="text-gray-700 dark:text-gray-300">Count : {{p.count}}</p>
                        <p class="text-gray-700 dark:text-gray-300">Price : {{p.price | currency : 'Egp'}}</p>
                    </div>
                    }
                </div>
            </div>
        </div>
    </div>
    }
</section>

@if(loading){
<Eco-loading />
}